{"version":3,"sources":["../src/cli.ts","../src/dev-server.ts","../src/lib/fs-utils.ts","../src/lib/package-root.ts","../src/lib/paths.ts","../src/lib/bindings.ts","../src/lib/prototypes.ts","../src/lib/superloop-data.ts","../src/lib/payload.ts","../src/lib/watch.ts","../src/commands/dev.ts","../src/commands/export.ts","../src/commands/generate.ts","../src/lib/templates.ts","../src/commands/list.ts","../src/commands/refine.ts","../src/commands/render.ts","../src/renderers/cli.ts","../src/renderers/frame.ts","../src/renderers/tui.ts","../src/lib/names.ts"],"sourcesContent":["import { Command } from \"commander\";\n\nimport { devCommand } from \"./commands/dev.js\";\nimport { exportPrototypeCommand } from \"./commands/export.js\";\nimport { generatePrototype } from \"./commands/generate.js\";\nimport { listPrototypesCommand } from \"./commands/list.js\";\nimport { refinePrototype } from \"./commands/refine.js\";\nimport { renderPrototypeCommand } from \"./commands/render.js\";\nimport { normalizeViewName } from \"./lib/names.js\";\nimport { resolveRepoRoot } from \"./lib/paths.js\";\n\nconst program = new Command();\n\nprogram\n  .name(\"superloop-ui\")\n  .description(\"Superloop UI prototyping framework\")\n  .option(\"--repo <path>\", \"Repo root (defaults to cwd)\")\n  .option(\"--loop <id>\", \"Loop id for data binding\");\n\nprogram\n  .command(\"generate\")\n  .argument(\"<view>\", \"View name for the prototype\")\n  .option(\"-d, --description <text>\", \"Natural language description\")\n  .action(async (view, options) => {\n    const repoRoot = resolveRepoRoot(program.opts().repo);\n    const viewName = normalizeViewName(view);\n    await generatePrototype({\n      repoRoot,\n      viewName,\n      description: options.description,\n    });\n  });\n\nprogram\n  .command(\"refine\")\n  .argument(\"<view>\", \"View name to refine\")\n  .option(\"-d, --description <text>\", \"Natural language description\")\n  .action(async (view, options) => {\n    const repoRoot = resolveRepoRoot(program.opts().repo);\n    const viewName = normalizeViewName(view);\n    await refinePrototype({\n      repoRoot,\n      viewName,\n      description: options.description,\n    });\n  });\n\nprogram\n  .command(\"list\")\n  .description(\"List available prototypes\")\n  .action(async () => {\n    const repoRoot = resolveRepoRoot(program.opts().repo);\n    await listPrototypesCommand({ repoRoot });\n  });\n\nprogram\n  .command(\"render\")\n  .argument(\"<view>\", \"View name to render\")\n  .option(\"-v, --version <id>\", \"Version id or filename\")\n  .option(\"-r, --renderer <mode>\", \"Renderer: cli or tui\", \"cli\")\n  .option(\"--raw\", \"Skip data binding\")\n  .action(async (view, options) => {\n    const repoRoot = resolveRepoRoot(program.opts().repo);\n    const viewName = normalizeViewName(view);\n    const renderer = options.renderer === \"tui\" ? \"tui\" : \"cli\";\n    await renderPrototypeCommand({\n      repoRoot,\n      viewName,\n      versionId: options.version,\n      renderer,\n      loopId: program.opts().loop,\n      raw: Boolean(options.raw),\n    });\n  });\n\nprogram\n  .command(\"export\")\n  .argument(\"<view>\", \"View name to export\")\n  .option(\"-v, --version <id>\", \"Version id or filename\")\n  .option(\"-o, --out <dir>\", \"Output directory\", \"./superloop-ui-export\")\n  .action(async (view, options) => {\n    const repoRoot = resolveRepoRoot(program.opts().repo);\n    const viewName = normalizeViewName(view);\n    await exportPrototypeCommand({\n      repoRoot,\n      viewName,\n      versionId: options.version,\n      loopId: program.opts().loop,\n      outDir: options.out,\n    });\n  });\n\nprogram\n  .command(\"dev\")\n  .description(\"Start the WorkGrid dev server\")\n  .option(\"-p, --port <port>\", \"Port\", \"5173\")\n  .option(\"--host <host>\", \"Host\", \"localhost\")\n  .option(\"--no-open\", \"Disable auto-open in browser\")\n  .action(async (options) => {\n    const repoRoot = resolveRepoRoot(program.opts().repo);\n    const port = Number(options.port);\n    await devCommand({\n      repoRoot,\n      loopId: program.opts().loop,\n      port: Number.isNaN(port) ? 5173 : port,\n      host: options.host,\n      open: options.open,\n    });\n  });\n\nprogram.parse();\n","import { spawn } from \"node:child_process\";\nimport fs from \"node:fs/promises\";\nimport http from \"node:http\";\nimport path from \"node:path\";\n\nimport { fileExists } from \"./lib/fs-utils.js\";\nimport { resolvePackageRoot } from \"./lib/package-root.js\";\nimport { resolveLoopDir, resolveLoopsRoot, resolvePrototypesRoot } from \"./lib/paths.js\";\nimport { buildPrototypesPayload } from \"./lib/payload.js\";\nimport { watchPaths } from \"./lib/watch.js\";\n\nexport type DevServerOptions = {\n  repoRoot: string;\n  loopId?: string;\n  port: number;\n  host: string;\n  open: boolean;\n};\n\ntype SseClient = http.ServerResponse;\n\nexport async function startDevServer(options: DevServerOptions): Promise<void> {\n  const packageRoot = resolvePackageRoot(import.meta.url);\n  const webRoot = path.join(packageRoot, \"src\", \"web\");\n  const distWebRoot = path.join(packageRoot, \"dist\", \"web\");\n  const indexHtmlPath = path.join(webRoot, \"index.html\");\n\n  const clients = new Set<SseClient>();\n\n  const server = http.createServer(async (req, res) => {\n    if (!req.url) {\n      res.writeHead(400);\n      res.end();\n      return;\n    }\n\n    const url = new URL(req.url, `http://${req.headers.host ?? \"localhost\"}`);\n\n    if (url.pathname === \"/events\") {\n      res.writeHead(200, {\n        \"Content-Type\": \"text/event-stream\",\n        \"Cache-Control\": \"no-cache\",\n        Connection: \"keep-alive\",\n      });\n      res.write(\"\\n\");\n      clients.add(res);\n      req.on(\"close\", () => {\n        clients.delete(res);\n      });\n      return;\n    }\n\n    if (url.pathname === \"/api/prototypes\") {\n      const payload = await buildPrototypesPayload({\n        repoRoot: options.repoRoot,\n        loopId: options.loopId,\n      });\n      res.writeHead(200, { \"Content-Type\": \"application/json\" });\n      res.end(JSON.stringify(payload));\n      return;\n    }\n\n    if (url.pathname === \"/\" || url.pathname === \"/index.html\") {\n      const html = await fs.readFile(indexHtmlPath, \"utf8\");\n      res.writeHead(200, { \"Content-Type\": \"text/html; charset=utf-8\" });\n      res.end(html);\n      return;\n    }\n\n    if (url.pathname.startsWith(\"/main\")) {\n      const filePath = path.join(distWebRoot, url.pathname.replace(\"/\", \"\"));\n      if (!(await fileExists(filePath))) {\n        res.writeHead(503, { \"Content-Type\": \"text/plain\" });\n        res.end(\"Web bundle not ready. Waiting for build...\");\n        return;\n      }\n      const contentType = url.pathname.endsWith(\".map\") ? \"application/json\" : \"text/javascript\";\n      res.writeHead(200, { \"Content-Type\": contentType });\n      res.end(await fs.readFile(filePath));\n      return;\n    }\n\n    res.writeHead(404, { \"Content-Type\": \"text/plain\" });\n    res.end(\"Not found\");\n  });\n\n  await new Promise<void>((resolve) => {\n    server.listen(options.port, options.host, () => resolve());\n  });\n\n  const address = `http://${options.host}:${options.port}`;\n  console.log(`Superloop UI dev server running at ${address}`);\n\n  if (options.open) {\n    openBrowser(address);\n  }\n\n  const buildProcess = spawn(\"bunx\", [\"tsup\", \"--watch\", \"--config\", \"tsup.config.ts\"], {\n    cwd: packageRoot,\n    stdio: \"inherit\",\n  });\n\n  const broadcast = async () => {\n    const payload = await buildPrototypesPayload({\n      repoRoot: options.repoRoot,\n      loopId: options.loopId,\n    });\n    broadcastEvent(clients, \"data\", payload);\n  };\n\n  const prototypesRoot = resolvePrototypesRoot(options.repoRoot);\n  const loopsRoot = resolveLoopsRoot(options.repoRoot);\n  const loopDir = options.loopId ? resolveLoopDir(options.repoRoot, options.loopId) : undefined;\n\n  await fs.mkdir(prototypesRoot, { recursive: true });\n\n  const dataWatcher = watchPaths(\n    [prototypesRoot, loopsRoot, loopDir].filter((value): value is string => Boolean(value)),\n    () => {\n      void broadcast();\n    },\n  );\n\n  const bundleWatcher = watchPaths([distWebRoot], () => {\n    broadcastEvent(clients, \"reload\", { reason: \"bundle\" });\n  });\n\n  const shutdown = () => {\n    dataWatcher.close();\n    bundleWatcher.close();\n    for (const client of clients) {\n      client.end();\n    }\n    buildProcess.kill();\n    server.close();\n  };\n\n  process.on(\"SIGINT\", shutdown);\n  process.on(\"SIGTERM\", shutdown);\n}\n\nfunction broadcastEvent(clients: Set<SseClient>, event: string, payload: unknown) {\n  const body = `event: ${event}\\ndata: ${JSON.stringify(payload)}\\n\\n`;\n  for (const client of clients) {\n    client.write(body);\n  }\n}\n\nfunction openBrowser(url: string) {\n  const platform = process.platform;\n  if (platform === \"darwin\") {\n    spawn(\"open\", [url], { stdio: \"ignore\" });\n    return;\n  }\n  if (platform === \"win32\") {\n    spawn(\"cmd\", [\"/c\", \"start\", url], { stdio: \"ignore\" });\n    return;\n  }\n  spawn(\"xdg-open\", [url], { stdio: \"ignore\" });\n}\n","import fs from \"node:fs/promises\";\n\nexport async function fileExists(path: string): Promise<boolean> {\n  try {\n    await fs.access(path);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport async function readJson<T>(path: string): Promise<T | null> {\n  try {\n    const raw = await fs.readFile(path, \"utf8\");\n    return JSON.parse(raw) as T;\n  } catch {\n    return null;\n  }\n}\n","import path from \"node:path\";\nimport { fileURLToPath } from \"node:url\";\n\nexport function resolvePackageRoot(metaUrl: string): string {\n  const filename = fileURLToPath(metaUrl);\n  const dir = path.dirname(filename);\n  return path.resolve(dir, \"..\");\n}\n","import fs from \"node:fs\";\nimport path from \"node:path\";\n\nexport const SUPERLOOP_DIR = \".superloop\";\nexport const UI_PROTOTYPES_DIR = path.join(SUPERLOOP_DIR, \"ui\", \"prototypes\");\nexport const LOOPS_DIR = path.join(SUPERLOOP_DIR, \"loops\");\n\nexport function resolveRepoRoot(repoRoot?: string): string {\n  if (repoRoot) {\n    return path.resolve(repoRoot);\n  }\n\n  // Walk up to locate the Superloop repo root so CLI commands work from subdirs.\n  const cwd = process.cwd();\n  let current = cwd;\n  let gitRoot: string | null = null;\n\n  while (true) {\n    if (fs.existsSync(path.join(current, SUPERLOOP_DIR))) {\n      return current;\n    }\n\n    if (fs.existsSync(path.join(current, \"superloop.sh\"))) {\n      return current;\n    }\n\n    if (!gitRoot && fs.existsSync(path.join(current, \".git\"))) {\n      gitRoot = current;\n    }\n\n    const parent = path.dirname(current);\n    if (parent === current) {\n      break;\n    }\n    current = parent;\n  }\n\n  return gitRoot ?? cwd;\n}\n\nexport function resolvePrototypesRoot(repoRoot: string): string {\n  return path.join(repoRoot, UI_PROTOTYPES_DIR);\n}\n\nexport function resolveLoopsRoot(repoRoot: string): string {\n  return path.join(repoRoot, LOOPS_DIR);\n}\n\nexport function resolveLoopDir(repoRoot: string, loopId: string): string {\n  return path.join(resolveLoopsRoot(repoRoot), loopId);\n}\n","export type BindingRecord = Record<string, unknown>;\n\nexport function injectBindings(template: string, data: BindingRecord): string {\n  return template.replace(/\\{\\{\\s*([a-zA-Z0-9_.-]+)\\s*\\}\\}/g, (match, key) => {\n    const value = resolvePath(data, key);\n    if (value === undefined || value === null) {\n      return match;\n    }\n    if (typeof value === \"object\") {\n      return JSON.stringify(value);\n    }\n    return String(value);\n  });\n}\n\nfunction resolvePath(data: BindingRecord, key: string): unknown {\n  if (!key.includes(\".\")) {\n    return data[key];\n  }\n  return key.split(\".\").reduce<unknown>((acc, segment) => {\n    if (acc && typeof acc === \"object\" && segment in (acc as Record<string, unknown>)) {\n      return (acc as Record<string, unknown>)[segment];\n    }\n    return undefined;\n  }, data);\n}\n","import fs from \"node:fs/promises\";\nimport path from \"node:path\";\n\nimport { fileExists, readJson } from \"./fs-utils.js\";\nimport { resolvePrototypesRoot } from \"./paths.js\";\n\nexport type PrototypeVersion = {\n  id: string;\n  filename: string;\n  path: string;\n  createdAt: string;\n  content: string;\n};\n\nexport type PrototypeView = {\n  name: string;\n  description?: string;\n  versions: PrototypeVersion[];\n  latest: PrototypeVersion;\n};\n\ntype PrototypeMeta = {\n  description?: string;\n  prompt?: string;\n  createdAt?: string;\n  updatedAt?: string;\n};\n\nconst VERSION_EXTENSION = \".txt\";\nconst META_FILENAME = \"meta.json\";\nconst TIMESTAMP_PATTERN = /^(\\d{8}-\\d{6})/;\n\nexport function createTimestampId(date = new Date()): string {\n  const pad = (value: number) => value.toString().padStart(2, \"0\");\n  const year = date.getFullYear();\n  const month = pad(date.getMonth() + 1);\n  const day = pad(date.getDate());\n  const hours = pad(date.getHours());\n  const minutes = pad(date.getMinutes());\n  const seconds = pad(date.getSeconds());\n  return `${year}${month}${day}-${hours}${minutes}${seconds}`;\n}\n\nexport function formatTimestamp(date: Date): string {\n  const pad = (value: number) => value.toString().padStart(2, \"0\");\n  const year = date.getFullYear();\n  const month = pad(date.getMonth() + 1);\n  const day = pad(date.getDate());\n  const hours = pad(date.getHours());\n  const minutes = pad(date.getMinutes());\n  const seconds = pad(date.getSeconds());\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n}\n\nexport async function listPrototypes(repoRoot: string): Promise<PrototypeView[]> {\n  const root = resolvePrototypesRoot(repoRoot);\n  if (!(await fileExists(root))) {\n    return [];\n  }\n\n  const entries = await fs.readdir(root, { withFileTypes: true });\n  const viewsByName = new Map<string, PrototypeView>();\n\n  for (const entry of entries) {\n    if (entry.isDirectory()) {\n      const view = await readViewDirectory(root, entry.name);\n      if (view) {\n        viewsByName.set(view.name, view);\n      }\n    }\n  }\n\n  for (const entry of entries) {\n    if (!entry.isFile() || !entry.name.endsWith(VERSION_EXTENSION)) {\n      continue;\n    }\n\n    const viewName = path.basename(entry.name, VERSION_EXTENSION);\n    const filePath = path.join(root, entry.name);\n    const version = await readVersionFile(filePath, entry.name);\n    const existing = viewsByName.get(viewName);\n\n    if (existing) {\n      if (!existing.versions.some((item) => item.filename === entry.name)) {\n        existing.versions.push(version);\n      }\n      existing.versions.sort((a, b) => a.createdAt.localeCompare(b.createdAt));\n      existing.latest = existing.versions[existing.versions.length - 1];\n    } else {\n      viewsByName.set(viewName, {\n        name: viewName,\n        versions: [version],\n        latest: version,\n      });\n    }\n  }\n\n  return Array.from(viewsByName.values()).sort((a, b) => a.name.localeCompare(b.name));\n}\n\nexport async function createPrototypeVersion(params: {\n  repoRoot: string;\n  viewName: string;\n  content: string;\n  description?: string;\n  prompt?: string;\n}): Promise<PrototypeVersion> {\n  const root = resolvePrototypesRoot(params.repoRoot);\n  const viewDir = path.join(root, params.viewName);\n  await fs.mkdir(viewDir, { recursive: true });\n\n  const timestampId = createTimestampId();\n  const filename = `${timestampId}${VERSION_EXTENSION}`;\n  const filePath = path.join(viewDir, filename);\n  await fs.writeFile(filePath, params.content, \"utf8\");\n\n  const metaPath = path.join(viewDir, META_FILENAME);\n  const meta = (await readJson<PrototypeMeta>(metaPath)) ?? {};\n  const now = new Date().toISOString();\n  const nextMeta: PrototypeMeta = {\n    description: params.description ?? meta.description,\n    prompt: params.prompt ?? meta.prompt,\n    createdAt: meta.createdAt ?? now,\n    updatedAt: now,\n  };\n  await fs.writeFile(metaPath, JSON.stringify(nextMeta, null, 2), \"utf8\");\n\n  return {\n    id: timestampId,\n    filename,\n    path: filePath,\n    createdAt: formatTimestamp(new Date()),\n    content: params.content,\n  };\n}\n\nexport async function readLatestPrototype(params: {\n  repoRoot: string;\n  viewName: string;\n}): Promise<PrototypeView | null> {\n  const root = resolvePrototypesRoot(params.repoRoot);\n  const viewDir = path.join(root, params.viewName);\n  const view = (await fileExists(viewDir)) ? await readViewDirectory(root, params.viewName) : null;\n\n  const standaloneName = `${params.viewName}${VERSION_EXTENSION}`;\n  const standalonePath = path.join(root, standaloneName);\n  if (await fileExists(standalonePath)) {\n    const version = await readVersionFile(standalonePath, standaloneName);\n    if (view) {\n      if (!view.versions.some((item) => item.filename === standaloneName)) {\n        view.versions.push(version);\n      }\n      view.versions.sort((a, b) => a.createdAt.localeCompare(b.createdAt));\n      view.latest = view.versions[view.versions.length - 1];\n      return view;\n    }\n\n    return {\n      name: params.viewName,\n      versions: [version],\n      latest: version,\n    };\n  }\n\n  return view ?? null;\n}\n\nasync function readViewDirectory(root: string, viewName: string): Promise<PrototypeView | null> {\n  const viewDir = path.join(root, viewName);\n  const entries = await fs.readdir(viewDir, { withFileTypes: true });\n  const versions: PrototypeVersion[] = [];\n  let description: string | undefined;\n\n  for (const entry of entries) {\n    if (entry.isFile() && entry.name === META_FILENAME) {\n      const meta = await readJson<PrototypeMeta>(path.join(viewDir, entry.name));\n      description = meta?.description;\n      continue;\n    }\n\n    if (entry.isFile() && entry.name.endsWith(VERSION_EXTENSION)) {\n      const filePath = path.join(viewDir, entry.name);\n      const version = await readVersionFile(filePath, entry.name);\n      versions.push(version);\n    }\n  }\n\n  if (versions.length === 0) {\n    return null;\n  }\n\n  versions.sort((a, b) => a.createdAt.localeCompare(b.createdAt));\n  const latest = versions[versions.length - 1];\n\n  return {\n    name: viewName,\n    description,\n    versions,\n    latest,\n  };\n}\n\nfunction readVersionId(filename: string, fallbackDate: Date): string {\n  const match = filename.match(TIMESTAMP_PATTERN);\n  if (match?.[1]) {\n    return match[1];\n  }\n  return createTimestampId(fallbackDate);\n}\n\nasync function readVersionFile(filePath: string, filename: string): Promise<PrototypeVersion> {\n  const stats = await fs.stat(filePath);\n  const content = await fs.readFile(filePath, \"utf8\");\n  const versionId = readVersionId(filename, stats.mtime);\n  const createdAt = formatTimestamp(resolveTimestamp(versionId, stats.mtime));\n\n  return {\n    id: versionId,\n    filename,\n    path: filePath,\n    createdAt,\n    content,\n  };\n}\n\nfunction resolveTimestamp(versionId: string, fallbackDate: Date): Date {\n  const parsed = parseTimestampId(versionId);\n  return parsed ?? fallbackDate;\n}\n\nfunction parseTimestampId(versionId: string): Date | null {\n  const match = versionId.match(TIMESTAMP_PATTERN);\n  if (!match?.[1]) {\n    return null;\n  }\n\n  const id = match[1];\n  const year = Number(id.slice(0, 4));\n  const month = Number(id.slice(4, 6));\n  const day = Number(id.slice(6, 8));\n  const hours = Number(id.slice(9, 11));\n  const minutes = Number(id.slice(11, 13));\n  const seconds = Number(id.slice(13, 15));\n  const date = new Date(year, month - 1, day, hours, minutes, seconds);\n\n  if (Number.isNaN(date.getTime())) {\n    return null;\n  }\n\n  return date;\n}\n","import fs from \"node:fs/promises\";\nimport path from \"node:path\";\n\nimport { fileExists, readJson } from \"./fs-utils.js\";\nimport { resolveLoopDir, resolveLoopsRoot } from \"./paths.js\";\n\ntype RunSummaryEntry = {\n  iteration?: number;\n  started_at?: string;\n  ended_at?: string;\n  promise?: {\n    expected?: string;\n    text?: string;\n    matched?: boolean;\n  };\n  gates?: {\n    tests?: string;\n    checklist?: string;\n    evidence?: string;\n    approval?: string;\n  };\n  completion_ok?: boolean;\n};\n\ntype RunSummary = {\n  loop_id?: string;\n  updated_at?: string;\n  entries?: RunSummaryEntry[];\n};\n\ntype TestStatus = {\n  ok?: boolean;\n  skipped?: boolean;\n};\n\ntype ChecklistStatus = {\n  ok?: boolean;\n};\n\ntype LoopEvent = {\n  timestamp?: string;\n  event?: string;\n  iteration?: number;\n  data?: Record<string, unknown>;\n};\n\ntype EventFallback = {\n  iteration?: string;\n  promise?: string;\n  promise_matched?: string;\n  test_status?: string;\n  checklist_status?: string;\n  evidence_status?: string;\n  approval_status?: string;\n  completion_ok?: string;\n  started_at?: string;\n  ended_at?: string;\n};\n\nexport type SuperloopDataPayload = {\n  loopId?: string;\n  data: Record<string, string>;\n};\n\nexport async function resolveLoopId(repoRoot: string, preferred?: string): Promise<string | null> {\n  const loopsRoot = resolveLoopsRoot(repoRoot);\n  if (!(await fileExists(loopsRoot))) {\n    return null;\n  }\n\n  if (preferred) {\n    const loopDir = resolveLoopDir(repoRoot, preferred);\n    if (await fileExists(loopDir)) {\n      return preferred;\n    }\n  }\n\n  if (process.env.SUPERLOOP_LOOP_ID) {\n    const envId = process.env.SUPERLOOP_LOOP_ID;\n    if (envId && (await fileExists(resolveLoopDir(repoRoot, envId)))) {\n      return envId;\n    }\n  }\n\n  const entries = await fs.readdir(loopsRoot, { withFileTypes: true });\n  const loopDirs = entries.filter((entry) => entry.isDirectory());\n  if (loopDirs.length === 0) {\n    return null;\n  }\n\n  const withStats = await Promise.all(\n    loopDirs.map(async (entry) => {\n      const dirPath = path.join(loopsRoot, entry.name);\n      const stats = await fs.stat(dirPath);\n      return { name: entry.name, mtimeMs: stats.mtimeMs };\n    }),\n  );\n\n  withStats.sort((a, b) => b.mtimeMs - a.mtimeMs);\n  return withStats[0]?.name ?? null;\n}\n\nexport async function loadSuperloopData(params: {\n  repoRoot: string;\n  loopId?: string;\n}): Promise<SuperloopDataPayload> {\n  const loopId = await resolveLoopId(params.repoRoot, params.loopId);\n  if (!loopId) {\n    return { data: {} };\n  }\n\n  const loopDir = resolveLoopDir(params.repoRoot, loopId);\n  const runSummary = await readJson<RunSummary>(path.join(loopDir, \"run-summary.json\"));\n  const testStatus = await readJson<TestStatus>(path.join(loopDir, \"test-status.json\"));\n  const checklistStatus = await readJson<ChecklistStatus>(\n    path.join(loopDir, \"checklist-status.json\"),\n  );\n  const eventFallback = await loadEventFallback(loopDir);\n\n  const entry = runSummary?.entries?.[runSummary.entries.length - 1];\n  const data: Record<string, string> = {\n    loop_id: loopId,\n    updated_at: runSummary?.updated_at ?? new Date().toISOString(),\n  };\n\n  if (entry?.iteration !== undefined) {\n    data.iteration = String(entry.iteration);\n  }\n\n  if (entry?.promise?.text || entry?.promise?.expected) {\n    data.promise = entry.promise.text ?? entry.promise.expected ?? \"\";\n  }\n\n  if (entry?.promise?.matched !== undefined) {\n    data.promise_matched = entry.promise.matched ? \"true\" : \"false\";\n  }\n\n  if (entry?.gates?.tests) {\n    data.test_status = entry.gates.tests;\n  } else if (testStatus && typeof testStatus.ok === \"boolean\") {\n    data.test_status = testStatus.ok ? (testStatus.skipped ? \"skipped\" : \"ok\") : \"failed\";\n  }\n\n  if (entry?.gates?.checklist) {\n    data.checklist_status = entry.gates.checklist;\n  } else if (typeof checklistStatus?.ok === \"boolean\") {\n    data.checklist_status = checklistStatus.ok ? \"ok\" : \"failed\";\n  }\n\n  if (entry?.gates?.evidence) {\n    data.evidence_status = entry.gates.evidence;\n  }\n\n  if (entry?.gates?.approval) {\n    data.approval_status = entry.gates.approval;\n  }\n\n  if (entry?.completion_ok !== undefined) {\n    data.completion_ok = entry.completion_ok ? \"true\" : \"false\";\n  }\n\n  if (entry?.started_at) {\n    data.started_at = entry.started_at;\n  }\n\n  if (entry?.ended_at) {\n    data.ended_at = entry.ended_at;\n  }\n\n  applyEventFallback(data, eventFallback);\n  return { loopId, data };\n}\n\nfunction applyEventFallback(data: Record<string, string>, fallback: EventFallback) {\n  const assignIfMissing = (key: keyof EventFallback) => {\n    const value = fallback[key];\n    if (value !== undefined && data[key] === undefined) {\n      data[key] = value;\n    }\n  };\n\n  assignIfMissing(\"iteration\");\n  assignIfMissing(\"promise\");\n  assignIfMissing(\"promise_matched\");\n  assignIfMissing(\"test_status\");\n  assignIfMissing(\"checklist_status\");\n  assignIfMissing(\"evidence_status\");\n  assignIfMissing(\"approval_status\");\n  assignIfMissing(\"completion_ok\");\n  assignIfMissing(\"started_at\");\n  assignIfMissing(\"ended_at\");\n}\n\nasync function loadEventFallback(loopDir: string): Promise<EventFallback> {\n  const eventsPath = path.join(loopDir, \"events.jsonl\");\n  if (!(await fileExists(eventsPath))) {\n    return {};\n  }\n\n  let raw: string;\n  try {\n    raw = await fs.readFile(eventsPath, \"utf8\");\n  } catch {\n    return {};\n  }\n\n  const lines = raw.trim().split(\"\\n\");\n  const fallback: EventFallback = {};\n  const pending = new Set<keyof EventFallback>([\n    \"iteration\",\n    \"promise\",\n    \"promise_matched\",\n    \"test_status\",\n    \"checklist_status\",\n    \"evidence_status\",\n    \"approval_status\",\n    \"completion_ok\",\n    \"started_at\",\n    \"ended_at\",\n  ]);\n\n  for (let index = lines.length - 1; index >= 0; index -= 1) {\n    const line = lines[index]?.trim();\n    if (!line) {\n      continue;\n    }\n\n    let event: LoopEvent;\n    try {\n      event = JSON.parse(line) as LoopEvent;\n    } catch {\n      continue;\n    }\n\n    if (pending.has(\"iteration\") && typeof event.iteration === \"number\") {\n      fallback.iteration = String(event.iteration);\n      pending.delete(\"iteration\");\n    }\n\n    const data = isRecord(event.data) ? event.data : {};\n\n    if (event.event === \"promise_checked\") {\n      if (pending.has(\"promise\")) {\n        const text = readString(data.text);\n        const expected = readString(data.expected);\n        if (text || expected) {\n          fallback.promise = text ?? expected;\n          pending.delete(\"promise\");\n        }\n      }\n\n      if (pending.has(\"promise_matched\")) {\n        const matched = readBoolean(data.matched);\n        if (matched !== undefined) {\n          fallback.promise_matched = matched ? \"true\" : \"false\";\n          pending.delete(\"promise_matched\");\n        }\n      }\n    }\n\n    if (event.event === \"tests_end\" && pending.has(\"test_status\")) {\n      const status = readString(data.status);\n      if (status) {\n        fallback.test_status = status;\n        pending.delete(\"test_status\");\n      }\n    }\n\n    if (event.event === \"checklist_end\" && pending.has(\"checklist_status\")) {\n      const status = readString(data.status);\n      if (status) {\n        fallback.checklist_status = status;\n        pending.delete(\"checklist_status\");\n      }\n    }\n\n    if (event.event === \"evidence_end\" && pending.has(\"evidence_status\")) {\n      const status = readString(data.status);\n      if (status) {\n        fallback.evidence_status = status;\n        pending.delete(\"evidence_status\");\n      }\n    }\n\n    if (event.event === \"gates_evaluated\") {\n      if (pending.has(\"test_status\")) {\n        const status = readString(data.tests);\n        if (status) {\n          fallback.test_status = status;\n          pending.delete(\"test_status\");\n        }\n      }\n\n      if (pending.has(\"checklist_status\")) {\n        const status = readString(data.checklist);\n        if (status) {\n          fallback.checklist_status = status;\n          pending.delete(\"checklist_status\");\n        }\n      }\n\n      if (pending.has(\"evidence_status\")) {\n        const status = readString(data.evidence);\n        if (status) {\n          fallback.evidence_status = status;\n          pending.delete(\"evidence_status\");\n        }\n      }\n\n      if (pending.has(\"approval_status\")) {\n        const status = readString(data.approval);\n        if (status) {\n          fallback.approval_status = status;\n          pending.delete(\"approval_status\");\n        }\n      }\n    }\n\n    if (event.event === \"iteration_start\" && pending.has(\"started_at\")) {\n      const startedAt = readString(data.started_at) ?? readString(event.timestamp);\n      if (startedAt) {\n        fallback.started_at = startedAt;\n        pending.delete(\"started_at\");\n      }\n    }\n\n    if (event.event === \"iteration_end\") {\n      if (pending.has(\"ended_at\")) {\n        const endedAt = readString(data.ended_at) ?? readString(event.timestamp);\n        if (endedAt) {\n          fallback.ended_at = endedAt;\n          pending.delete(\"ended_at\");\n        }\n      }\n\n      if (pending.has(\"completion_ok\")) {\n        const completion = readBoolean(data.completion);\n        if (completion !== undefined) {\n          fallback.completion_ok = completion ? \"true\" : \"false\";\n          pending.delete(\"completion_ok\");\n        }\n      }\n    }\n\n    if (pending.size === 0) {\n      break;\n    }\n  }\n\n  return fallback;\n}\n\nfunction isRecord(value: unknown): value is Record<string, unknown> {\n  return Boolean(value) && typeof value === \"object\" && !Array.isArray(value);\n}\n\nfunction readString(value: unknown): string | undefined {\n  return typeof value === \"string\" && value.trim() ? value : undefined;\n}\n\nfunction readBoolean(value: unknown): boolean | undefined {\n  return typeof value === \"boolean\" ? value : undefined;\n}\n","import { injectBindings } from \"./bindings.js\";\nimport { type PrototypeView, listPrototypes } from \"./prototypes.js\";\nimport { loadSuperloopData } from \"./superloop-data.js\";\n\nexport type RenderedPrototypeVersion = {\n  id: string;\n  filename: string;\n  path: string;\n  createdAt: string;\n  content: string;\n  rendered: string;\n};\n\nexport type RenderedPrototypeView = {\n  name: string;\n  description?: string;\n  versions: RenderedPrototypeVersion[];\n  latest: RenderedPrototypeVersion;\n};\n\nexport type PrototypesPayload = {\n  views: RenderedPrototypeView[];\n  loopId?: string;\n  data: Record<string, string>;\n  updatedAt: string;\n};\n\nexport async function buildPrototypesPayload(params: {\n  repoRoot: string;\n  loopId?: string;\n}): Promise<PrototypesPayload> {\n  const [views, superloop] = await Promise.all([\n    listPrototypes(params.repoRoot),\n    loadSuperloopData({ repoRoot: params.repoRoot, loopId: params.loopId }),\n  ]);\n\n  const renderedViews = views.map((view) => renderView(view, superloop.data));\n\n  return {\n    views: renderedViews,\n    loopId: superloop.loopId,\n    data: superloop.data,\n    updatedAt: new Date().toISOString(),\n  };\n}\n\nfunction renderView(view: PrototypeView, data: Record<string, string>): RenderedPrototypeView {\n  const versions = view.versions.map((version) => ({\n    ...version,\n    rendered: injectBindings(version.content, data),\n  }));\n  const latest = versions[versions.length - 1];\n\n  return {\n    name: view.name,\n    description: view.description,\n    versions,\n    latest,\n  };\n}\n","import fs from \"node:fs\";\nimport path from \"node:path\";\n\nexport type WatchHandle = {\n  close: () => void;\n};\n\nexport function watchPaths(paths: string[], onChange: () => void): WatchHandle {\n  const watchers: fs.FSWatcher[] = [];\n  const notify = debounce(onChange, 30);\n  const watchedDirs = new Set<string>();\n\n  function handleChange(dir: string, filename?: string | Buffer | null) {\n    notify();\n\n    if (!filename) {\n      return;\n    }\n\n    const name = filename.toString();\n    if (!name) {\n      return;\n    }\n\n    const fullPath = path.join(dir, name);\n    if (watchedDirs.has(fullPath)) {\n      return;\n    }\n\n    try {\n      if (fs.existsSync(fullPath) && fs.statSync(fullPath).isDirectory()) {\n        scanDirs(fullPath);\n      }\n    } catch {\n      // Ignore transient filesystem errors.\n    }\n  }\n\n  function watchDir(dir: string) {\n    if (watchedDirs.has(dir) || !fs.existsSync(dir)) {\n      return;\n    }\n\n    try {\n      const watcher = fs.watch(dir, (_event, filename) => {\n        handleChange(dir, filename);\n      });\n      watchers.push(watcher);\n      watchedDirs.add(dir);\n    } catch {\n      // Ignore directories that cannot be watched on this platform.\n    }\n  }\n\n  function scanDirs(root: string) {\n    if (!fs.existsSync(root)) {\n      return;\n    }\n\n    watchDir(root);\n\n    try {\n      const entries = fs.readdirSync(root, { withFileTypes: true });\n      for (const entry of entries) {\n        if (entry.isDirectory()) {\n          scanDirs(path.join(root, entry.name));\n        }\n      }\n    } catch {\n      // Ignore directories we cannot traverse.\n    }\n  }\n\n  for (const watchPath of paths) {\n    if (!fs.existsSync(watchPath)) {\n      continue;\n    }\n\n    try {\n      const watcher = fs.watch(watchPath, { recursive: true }, () => {\n        notify();\n      });\n      watchers.push(watcher);\n    } catch {\n      scanDirs(watchPath);\n    }\n  }\n\n  return {\n    close: () => {\n      for (const watcher of watchers) {\n        watcher.close();\n      }\n    },\n  };\n}\n\nfunction debounce(callback: () => void, waitMs: number): () => void {\n  let timeout: NodeJS.Timeout | null = null;\n  return () => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      timeout = null;\n      callback();\n    }, waitMs);\n  };\n}\n","import { startDevServer } from \"../server/dev.js\";\n\nexport async function devCommand(params: {\n  repoRoot: string;\n  loopId?: string;\n  port: number;\n  host: string;\n  open: boolean;\n}): Promise<void> {\n  await startDevServer({\n    repoRoot: params.repoRoot,\n    loopId: params.loopId,\n    port: params.port,\n    host: params.host,\n    open: params.open,\n  });\n}\n","import fs from \"node:fs/promises\";\nimport path from \"node:path\";\nimport chalk from \"chalk\";\n\nimport { injectBindings } from \"../lib/bindings.js\";\nimport { type PrototypeVersion, readLatestPrototype } from \"../lib/prototypes.js\";\nimport { loadSuperloopData } from \"../lib/superloop-data.js\";\n\nexport async function exportPrototypeCommand(params: {\n  repoRoot: string;\n  viewName: string;\n  versionId?: string;\n  outDir: string;\n  loopId?: string;\n}): Promise<void> {\n  const view = await readLatestPrototype({\n    repoRoot: params.repoRoot,\n    viewName: params.viewName,\n  });\n\n  if (!view) {\n    console.log(chalk.red(`Prototype ${params.viewName} not found.`));\n    return;\n  }\n\n  const version = selectVersion(view.versions, params.versionId);\n  if (!version) {\n    console.log(chalk.red(`Version ${params.versionId} not found.`));\n    return;\n  }\n\n  const superloop = await loadSuperloopData({\n    repoRoot: params.repoRoot,\n    loopId: params.loopId,\n  });\n  const rendered = injectBindings(version.content, superloop.data);\n\n  const outDir = path.resolve(params.outDir);\n  await fs.mkdir(outDir, { recursive: true });\n\n  const html = buildHtml(view.name, rendered);\n  const css = buildCss();\n\n  await fs.writeFile(path.join(outDir, \"index.html\"), html, \"utf8\");\n  await fs.writeFile(path.join(outDir, \"styles.css\"), css, \"utf8\");\n  await fs.writeFile(path.join(outDir, \"mockup.txt\"), rendered, \"utf8\");\n\n  console.log(chalk.green(`Exported scaffold to ${outDir}`));\n}\n\nfunction selectVersion(versions: PrototypeVersion[], versionId?: string) {\n  if (!versionId) {\n    return versions[versions.length - 1];\n  }\n  return (\n    versions.find((version) => version.id === versionId) ??\n    versions.find((version) => version.filename === versionId)\n  );\n}\n\nfunction buildHtml(title: string, content: string): string {\n  return `<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <title>${escapeHtml(title)} - Superloop UI</title>\n    <link rel=\"stylesheet\" href=\"styles.css\" />\n  </head>\n  <body>\n    <main class=\"stage\">\n      <h1>${escapeHtml(title)}</h1>\n      <pre class=\"mockup\">${escapeHtml(content)}</pre>\n    </main>\n  </body>\n</html>\n`;\n}\n\nfunction buildCss(): string {\n  return `:root {\n  color-scheme: light;\n  --bg: #0f172a;\n  --panel: #0b1220;\n  --text: #e2e8f0;\n  --accent: #38bdf8;\n}\n\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  min-height: 100vh;\n  font-family: \"Space Mono\", \"Fira Code\", \"Menlo\", monospace;\n  background: radial-gradient(circle at top, #10213f 0%, #070b14 55%, #030507 100%);\n  color: var(--text);\n}\n\n.stage {\n  max-width: 960px;\n  margin: 0 auto;\n  padding: 64px 24px;\n}\n\nh1 {\n  margin: 0 0 24px;\n  font-size: 28px;\n  letter-spacing: 0.04em;\n}\n\n.mockup {\n  padding: 24px;\n  background: var(--panel);\n  border: 1px solid rgba(56, 189, 248, 0.4);\n  border-radius: 16px;\n  white-space: pre-wrap;\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);\n}\n`;\n}\n\nfunction escapeHtml(value: string): string {\n  return value\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\\\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\");\n}\n","import { input } from \"@inquirer/prompts\";\nimport ora from \"ora\";\n\nimport { createPrototypeVersion } from \"../lib/prototypes.js\";\nimport { buildPlaceholder } from \"../lib/templates.js\";\n\nexport async function generatePrototype(params: {\n  repoRoot: string;\n  viewName: string;\n  description?: string;\n}): Promise<void> {\n  const description = params.description?.trim()\n    ? params.description.trim()\n    : await input({ message: \"Describe the view you want to prototype\" });\n\n  const spinner = ora(\"Creating prototype...\").start();\n  const content = buildPlaceholder(params.viewName, description);\n  const version = await createPrototypeVersion({\n    repoRoot: params.repoRoot,\n    viewName: params.viewName,\n    content,\n    description,\n    prompt: description,\n  });\n  spinner.succeed(`Prototype created at ${version.path}`);\n}\n","const FRAME_WIDTH = 78;\n\nexport function buildPlaceholder(viewName: string, description?: string): string {\n  const lines = [\n    `SUPERLOOP UI: ${viewName}`,\n    \"\",\n    description ? `Description: ${description}` : \"Description:\",\n    \"\",\n    \"Replace this text with your ASCII mockup.\",\n    \"Use bindings like {{iteration}} or {{test_status}}.\",\n    \"\",\n  ];\n\n  return renderFrame(lines);\n}\n\nfunction renderFrame(lines: string[]): string {\n  const top = `+${\"-\".repeat(FRAME_WIDTH)}+`;\n  const body = lines.map((line) => {\n    const padded = line.padEnd(FRAME_WIDTH, \" \");\n    return `|${padded}|`;\n  });\n  return [top, ...body, top].join(\"\\n\");\n}\n","import chalk from \"chalk\";\n\nimport { listPrototypes } from \"../lib/prototypes.js\";\n\nexport async function listPrototypesCommand(params: { repoRoot: string }): Promise<void> {\n  const views = await listPrototypes(params.repoRoot);\n  if (views.length === 0) {\n    console.log(chalk.yellow(\"No prototypes found.\"));\n    return;\n  }\n\n  for (const view of views) {\n    console.log(chalk.cyan(view.name));\n    if (view.description) {\n      console.log(`  ${chalk.dim(view.description)}`);\n    }\n    for (const version of view.versions) {\n      console.log(`  - ${version.filename} (${version.createdAt})`);\n    }\n  }\n}\n","import { input } from \"@inquirer/prompts\";\nimport ora from \"ora\";\n\nimport { createPrototypeVersion, readLatestPrototype } from \"../lib/prototypes.js\";\n\nexport async function refinePrototype(params: {\n  repoRoot: string;\n  viewName: string;\n  description?: string;\n}): Promise<void> {\n  const spinner = ora(\"Creating refinement...\").start();\n  const view = await readLatestPrototype({\n    repoRoot: params.repoRoot,\n    viewName: params.viewName,\n  });\n\n  if (!view) {\n    spinner.fail(`No existing prototype found for ${params.viewName}`);\n    return;\n  }\n\n  const description = params.description?.trim()\n    ? params.description.trim()\n    : await input({ message: \"Describe the refinement you want to apply\" });\n\n  const version = await createPrototypeVersion({\n    repoRoot: params.repoRoot,\n    viewName: params.viewName,\n    content: view.latest.content,\n    description,\n  });\n\n  spinner.succeed(`Refinement created at ${version.path}`);\n}\n","import chalk from \"chalk\";\n\nimport { injectBindings } from \"../lib/bindings.js\";\nimport { type PrototypeVersion, readLatestPrototype } from \"../lib/prototypes.js\";\nimport { loadSuperloopData } from \"../lib/superloop-data.js\";\nimport { renderCli } from \"../renderers/cli.js\";\nimport { renderTui } from \"../renderers/tui.js\";\n\nexport async function renderPrototypeCommand(params: {\n  repoRoot: string;\n  viewName: string;\n  versionId?: string;\n  renderer: \"cli\" | \"tui\";\n  loopId?: string;\n  raw?: boolean;\n}): Promise<void> {\n  const view = await readLatestPrototype({\n    repoRoot: params.repoRoot,\n    viewName: params.viewName,\n  });\n\n  if (!view) {\n    console.log(chalk.red(`Prototype ${params.viewName} not found.`));\n    return;\n  }\n\n  const version = selectVersion(view.versions, params.versionId);\n  if (!version) {\n    console.log(chalk.red(`Version ${params.versionId} not found.`));\n    return;\n  }\n\n  let content = version.content;\n  if (!params.raw) {\n    const superloop = await loadSuperloopData({\n      repoRoot: params.repoRoot,\n      loopId: params.loopId,\n    });\n    content = injectBindings(content, superloop.data);\n  }\n\n  if (params.renderer === \"tui\") {\n    await renderTui(content, view.name);\n    return;\n  }\n\n  console.log(renderCli(content, view.name));\n}\n\nfunction selectVersion(versions: PrototypeVersion[], versionId?: string) {\n  if (!versionId) {\n    return versions[versions.length - 1];\n  }\n  return (\n    versions.find((version) => version.id === versionId) ??\n    versions.find((version) => version.filename === versionId)\n  );\n}\n","import chalk from \"chalk\";\n\nimport { buildFrame } from \"./frame.js\";\n\nexport function renderCli(text: string, title?: string): string {\n  const frame = buildFrame(text, title);\n  const styledBorder = chalk.cyan(frame.border);\n\n  const body = frame.bodyLines.map((line) => {\n    return chalk.cyan(\"| \") + chalk.white(line) + chalk.cyan(\" |\");\n  });\n\n  if (frame.titleLine) {\n    const titleLine = chalk.cyan(\"|\") + chalk.cyan(frame.titleLine) + chalk.cyan(\"|\");\n    return [styledBorder, titleLine, styledBorder, ...body, styledBorder].join(\"\\n\");\n  }\n\n  return [styledBorder, ...body, styledBorder].join(\"\\n\");\n}\n","export type FrameData = {\n  contentWidth: number;\n  border: string;\n  titleLine?: string;\n  bodyLines: string[];\n};\n\nexport function buildFrame(text: string, title?: string): FrameData {\n  const lines = text.split(\"\\n\");\n  const titleWidth = title ? title.length + 2 : 0;\n  const contentWidth = Math.max(...lines.map((line) => line.length), titleWidth);\n  const border = `+${\"-\".repeat(contentWidth + 2)}+`;\n  const bodyLines = lines.map((line) => line.padEnd(contentWidth, \" \"));\n  const titleLine = title ? ` ${title} `.padEnd(contentWidth + 2, \" \") : undefined;\n\n  return {\n    contentWidth,\n    border,\n    titleLine,\n    bodyLines,\n  };\n}\n\nexport function frameToText(frame: FrameData): string {\n  const lines = [frame.border];\n\n  if (frame.titleLine) {\n    lines.push(`|${frame.titleLine}|`, frame.border);\n  }\n\n  for (const line of frame.bodyLines) {\n    lines.push(`| ${line} |`);\n  }\n\n  lines.push(frame.border);\n  return lines.join(\"\\n\");\n}\n","import * as blessed from \"blessed\";\n\nimport { buildFrame, frameToText } from \"./frame.js\";\n\nexport async function renderTui(text: string, title?: string): Promise<void> {\n  const framed = frameToText(buildFrame(text, title));\n  return new Promise((resolve) => {\n    const screen = blessed.screen({\n      smartCSR: true,\n      title: title ?? \"Superloop UI\",\n    });\n\n    const box = blessed.box({\n      top: \"center\",\n      left: \"center\",\n      width: \"90%\",\n      height: \"90%\",\n      content: framed,\n      tags: false,\n      scrollable: true,\n      alwaysScroll: true,\n      keys: true,\n      vi: true,\n    });\n\n    screen.append(box);\n    screen.key([\"q\", \"C-c\", \"escape\"], () => {\n      screen.destroy();\n      resolve();\n    });\n\n    screen.render();\n  });\n}\n","export function normalizeViewName(name: string): string {\n  return name.trim().replace(/[^a-zA-Z0-9_-]/g, \"-\");\n}\n"],"mappings":"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","names":["fs","path","path","fs","path","fs","path","fs","path","fs","path","fs","path","fs","path","path","fs","fs","path","path","fs","chalk","chalk","input","ora","ora","input","chalk","chalk","chalk","screen","box","chalk","selectVersion"]}